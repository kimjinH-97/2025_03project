<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì£¼ë¬¸ ê²½ë¡œ ë³´ê¸°</title>
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/search.css}">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body style="padding-top: 80px; font-family: 'Noto Sans KR', sans-serif; font-size: 16px;">

<!-- ìƒë‹¨ ë©”ë‰´ -->
<div th:replace="fragments/header :: header"></div>

<div class="container">

    <!-- ì£¼ë¬¸ ìƒì„¸ ì •ë³´ -->
    <div class="section">
        <h1>ì£¼ë¬¸ ìƒì„¸ ì •ë³´</h1>
        <ul>
            <li><strong>ì£¼ë¬¸ ID:</strong> <span id="orderId" th:text="${order.id}"></span></li>
            <li><strong>ì œí’ˆëª…:</strong> <span th:text="${order.warehouse.productName}"></span></li>
            <li><strong>ê²½ë¡œ:</strong> <span th:text="${order.route.startAddress + ' â†’ ' + order.route.endAddress}"></span></li>
            <li><strong>ìƒíƒœ:</strong> <span id="State" th:text="${order.status}"></span></li>
            <li><strong>ë“±ë¡ ì‹œê°„:</strong> <span th:text="${#temporals.format(order.updatedAt, 'yyyy-MM-dd HH:mm')}"></span></li>
        </ul>
        <a href="/orders/list">â† ì£¼ë¬¸ ë¦¬ìŠ¤íŠ¸ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>

    <!-- ğŸ“Œ ë°˜ë“œì‹œ JSì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì£¼ì†Œ input (ìˆ¨ê¹€ ì²˜ë¦¬) -->
    <input type="hidden" id="start" th:value="${order.route.startAddress}" />
    <input type="hidden" id="end" th:value="${order.route.endAddress}" />

    <!-- ê²½ë¡œ ì¶œë ¥ ì •ë³´ -->
    <div class="location-inputs">
        <div id="routeInfo" style="margin-top: 10px;"></div>
        <div id="placeNames" style="font-weight: bold; margin-top: 10px;"></div>
        <div id="routeInfoDetails" class="route-info-details" style="margin-top: 10px; white-space: pre-wrap;"></div>
    </div>

    <!-- ìƒíƒœë°” + ë²„íŠ¼ -->
    <div class="status-bar" style="margin-top: 20px;">
        <div>ë°°ì†¡ ìƒíƒœ: <span id="status">ëŒ€ê¸°ì¤‘</span></div>

        <button id="startButton" class="start-btn"
                th:onclick="'updateOrderStatus(' + ${order.id} + ', \'ë°°ì†¡ì¤‘\')'">ë°°ì†¡ ì‹œì‘</button>
        <button class="start-btn" id="pauseButton"
                th:onclick="'updateOrderStatus(' + ${order.id} + ', \'ì¼ì‹œì¤‘ì§€\')'">ì¤‘ì§€</button>
        <button class="start-btn" id="cancelButton"
                th:onclick="'updateOrderStatus(' + ${order.id} + ', \'ì¤€ë¹„ì¤‘\')'">ì·¨ì†Œ</button>
    </div>

    <!-- ì§€ë„ -->
    <div id="map" style="width:100%; height:600px; border-radius:12px; margin-top: 20px;"></div>
</div>

<!-- ì§€ë„ SDK ë° JS ì—°ê²° -->
<script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=3e305e2eebc1e0947c8ad966fe6d9f31&libraries=services"></script>
<script src="/js/detail.js"></script>
<script>
    window.addEventListener("DOMContentLoaded", function () {
        const id = document.getElementById("orderId")?.textContent;
        console.log("ğŸ’¡ HTMLì— ì‹¤ì œ orderIdëŠ”:", id);
    });
</script>
</body>
</html>
